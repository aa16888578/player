<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Telegram Mini App - YouTube æ’­æ”¾å™¨</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { background: #20232a; color: #fff; font-family: "Noto Sans TC", Arial, sans-serif; margin:0;}
    .container { max-width:480px; margin:15px auto 0; padding:1.4em .9em;}
    h1 {font-size: 1.5em; text-align: center; margin:.6em 0;}
    #desc { color: #89a; font-size:.95em; text-align:center;}
    #loader {margin:2em 0; text-align:center;}
    iframe { width:100%; max-width:430px; min-height:245px; border:none; border-radius:8px; background:#111;}
    #back-btn {margin:1.7em auto .5em auto; background:#3586ff; color:#fff; padding:.75em 2em; border-radius:7px; border:none; font-size:1em;cursor:pointer; display:none;}
    #back-btn:hover {background:#2466ca;}
    #error-info {display:none; color:#ff5252; text-align:center; margin:1.5em 0;}
    #vid-thumb {max-width:92%;border-radius:10px;display:none; margin:.5em auto;}
    #footer { color: #89a; font-size:.95em; margin-top:1.5em; text-align:center;}
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¬ Telegram YouTube æ’­æ”¾å™¨</h1>
    <div id="desc">Mini App ç›´æ¥æ’­æ”¾ YouTube éŸ³æ¨‚/å½±ç‰‡ï¼Œæ”¯æ´è¡Œå‹•è£ç½®</div>
    <div id="vid-title"></div>
    <img id="vid-thumb">
    <div id="loader">ğŸ”„ è¼‰å…¥ä¸­ï¼Œè«‹ç¨å€™...</div>
    <iframe id="ytplayer" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <div id="error-info">âš ï¸ æ­¤å½±ç‰‡ç„¡æ³•æ–¼æœ¬é æ’­æ”¾ï¼Œ<a id="yt-link" target="_blank">è«‹é»é€™è£¡æ–¼ YouTube é–‹å•Ÿ</a></div>
    <button id="back-btn" onclick="goBack()">è¿”å› Telegram</button>
    <div id="footer">Â© 2025 E7P æ’­æ”¾å™¨åœ˜éšŠï½œåƒ…ä¾›æ•™å­¸ä½¿ç”¨</div>
  </div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const videoId = params.get("video_id");
    if(videoId && /^[\w-]{11}$/.test(videoId)){
      document.getElementById("ytplayer").src = `https://www.youtube.com/embed/${videoId}?autoplay=1&hl=zh-TW`;
      document.getElementById("yt-link").href = `https://www.youtube.com/watch?v=${videoId}`;
      document.getElementById("vid-thumb").src = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;
      document.getElementById("vid-thumb").style.display = '';
      document.getElementById("vid-title").innerText = ""; // å¯é€é query åƒæ•¸å¸¶å…¥æ¨™é¡Œ
    }else{
      document.getElementById('loader').style.display="none";
      document.getElementById('error-info').style.display="";
      document.getElementById('error-info').innerHTML = "âŒ ç„¡æ•ˆçš„å½±ç‰‡ IDï¼";
      document.getElementById('ytplayer').style.display="none";
    }
    // è™•ç†è¼‰å…¥å®Œæˆèˆ‡éŒ¯èª¤
    const ytframe = document.getElementById('ytplayer');
    ytframe.onload = function() { document.getElementById('loader').style.display='none'; }
    ytframe.onerror = function() {
      document.getElementById('loader').style.display="none";
      document.getElementById('error-info').style.display="";
    };
    // è¿”å› Telegram æŒ‰éˆ•åƒ…æ–¼ WebApp å…§é¡¯ç¤º
    function goBack(){
      if(window.Telegram && Telegram.WebApp){ Telegram.WebApp.close(); }
      else{ window.open("https://t.me/"); }
    }
    if(window.Telegram && Telegram.WebApp){
      document.getElementById('back-btn').style.display='';
    }
  </script>
</body>
</html>
